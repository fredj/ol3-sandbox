<!DOCTYPE html>
<html>
  <head>
    <title>ol3 mobile app</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">

    <link href="lib/bootstrap.css" rel="stylesheet" media="screen">
    <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" media="screen">
    <link href="mobile.css" rel="stylesheet" media="screen">
  </head>
  <body>
    <div class="navbar navbar-fixed-top">
      <form class="navbar-form pull-left">
        <input type="text" style="width: 200px;">
        <button class="btn btn-default"><i class="icon-search"></i></button>
      </form>

      <form class="navbar-form pull-right">
        <div class="btn-group">
          <button class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="icon-ellipsis-vertical"></i></button>
          <ul class="dropdown-menu pull-right">
            <li><a href="#">Action</a></li>
            <li><a href="#">Action</a></li>
            <li class="divider"></li>
            <li class="dropdown-submenu pull-left"><a href="#">Share this map</a>
              <ul  class="dropdown-menu">
                <li><a href="#"><i class="icon-twitter"></i> Twitter</a></li>
                <li><a href="#"><i class="icon-facebook-sign"></i> facebook</a></li>
                <li><a href="#"><i class="icon-pinterest"></i> Pinterest</a></li>
                <li><a href="#"><i class="icon-google-plus-sign"></i> Google+</a></li>
              </ul>
          </ul>
        </div>
      </form>

    </div>
    <div class="map" id="map">
      <button class="btn btn-default map-control ol-compass"><i class="icon-chevron-sign-up"></i></button>
      <button class="btn btn-primary map-control ol-location" data-ol-control="geolocation"><i class="icon-location-arrow"></i></button>
      <div class="btn-group-vertical map-control ol-zoom">
        <button class="btn btn-primary" data-ol-control="zoom-in"><i class="icon-plus"></i></button>
        <button class="btn btn-primary" data-ol-control="zoom-out"><i class="icon-minus"></i></button>
      </div>
    </div>

    <script src="lib/ol.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script src="lib/fastclick.js"></script>
    <script src="lib/bootstrap.js"></script>
    <script>
      $(window).load(function() {
        FastClick.attach(document.body);
      });

      var map = new ol.Map({
        target: document.getElementById('map'),
        layers: [
          new ol.layer.TileLayer({
            source: new ol.source.Stamen({
              layer: 'watercolor'
            })
          }),
          new ol.layer.TileLayer({
            source: new ol.source.Stamen({
              layer: 'terrain-labels'
            })
          })
        ],
        view: new ol.View2D({
          center: [0, 0],
          zoom: 2
        })
      });

      var view = map.getView();
      var geolocation = new ol.Geolocation({
        tracking: false
      });
      geolocation.on('position_changed', function() {
        view.setCenter(geolocation.getPosition());
      });
      geolocation.bindTo('projection', view);

      view.on('rotation_changed', function() {
          $('.ol-compass').css('-webkit-transform', 'rotate(' + view.getRotation() + 'rad)');
      })

      $(map.getTarget()).find('[data-ol-control]').each(function() {
        $(this).click(function() {
          console.log($(this).data('ol-control'));
        });
      });
    </script>
  </body>
</html>
